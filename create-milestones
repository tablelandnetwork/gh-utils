#!/bin/bash
set -eu

if [ "$#" -ne 1 ]; then
    echo "please provide path to target repo, e.g., './create-milestones ../go-tableland'"
    exit 1
fi

(cd $1 && echo "Creating milestones in $PWD")

milestones=("4.2.2" "4.3.0" "5.0.1" "5.0.2" "5.1.0" "5.1.1" "5.1.2" "5.2.0" "5.2.1" "5.2.2" "5.3.0" "6.0.1" "6.0.2" "6.1.0" "6.1.1" "6.1.2" "6.2.0" "6.2.1" "6.2.2" "6.3.0")
duedates=("2022-09-27" "2022-10-13" "2022-11-01" "2022-11-15" "2022-11-29" "2022-12-13" "2022-12-24" "2023-01-17" "2023-01-31" "2023-02-14" "2023-03-02" "2023-03-21" "2023-04-04" "2023-04-18" "2023-05-02" "2023-05-16" "2023-05-30" "2023-06-13" "2023-06-27" "2023-07-13")

len=${#milestones[@]} 
for (( i=0; i<$len; i++ ))
do
  (cd $1 && gh milestone create --title ${milestones[$i]} --due-date ${duedates[$i]})
  echo ""
  echo "Created milestone ${milestones[$i]} with due date ${duedates[$i]}"
  echo ""
done
